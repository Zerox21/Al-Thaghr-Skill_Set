{% extends "base.html" %}
{% block content %}
<div class="card">
  <h1>Sign in</h1>
  <p class="muted">Only Al Thaghr students/teachers/chairman IDs that exist in the system can sign in.</p>

  <form method="post" class="form">
    <label>Role</label>
    <select name="role" id="roleSelect" required>
      <option value="student">Student</option>
      <option value="teacher">Teacher</option>
      <option value="chairman">Chairman</option>
    </select>

    <label>ID</label>
    <input name="user_id" placeholder="e.g. s001 / t001 / chairman" required>

    <label>PIN</label>
    <input name="pin" type="password" placeholder="PIN" required>

    <div id="teacherPick">
      <label>Teacher (student must choose)</label>
      <select name="teacher_id">
        <option value="">— choose —</option>
        {% for t in teachers %}
          <option value="{{ t.id }}">{{ t.name }} ({{ t.id }})</option>
        {% endfor %}
      </select>
    </div>

    <button class="btn" type="submit">Sign in</button>
  </form>

  <div class="notice">
    <b>Default demo accounts (change immediately):</b>
    <ul>
      <li>Chairman: <code>chairman</code> / PIN <code>1234</code></li>
      <li>Teacher: <code>t001</code> / PIN <code>1234</code></li>
      <li>Student: <code>s001</code> / PIN <code>1234</code></li>
    </ul>
  </div>
</div>

<script>
  const roleSel = document.getElementById('roleSelect');
  const teacherPick = document.getElementById('teacherPick');
  function sync(){
    teacherPick.style.display = (roleSel.value === 'student') ? 'block' : 'none';
  }
  roleSel.addEventListener('change', sync);
  sync();
</script>
{% endblock %}
