{% extends "base.html" %}
{% block content %}
<div class="card">
  <h1>Media Library</h1>
  <p class="muted">Upload images/videos to use inside questions. (Teachers can also upload from Teacher Media.) Stored under STORAGE_DIR (persistent if you attach a disk).</p>

  <h2>Upload</h2>
  <form method="post" action="{{ url_for('chairman.media_upload') }}" enctype="multipart/form-data" class="form">
    <input type="file" name="file" accept="image/*,video/*" required>
    <button class="btn" type="submit">Upload</button>
  </form>

  <h2>Files</h2>
  {% if files %}
    <table class="table">
      <thead><tr><th>File</th><th>Open</th><th>Meta snippet</th></tr></thead>
      <tbody>
        {% for f in files %}
          <tr>
            <td><code>{{ f }}</code></td>
            <td><a class="link" href="{{ url_for('files.media', relpath=f) }}" target="_blank">Open</a></td>
            <td>
              {% set ext = f.rsplit('.',1)[-1].lower() %}
              {% if ext in ['png','jpg','jpeg','gif'] %}
                <code>{"image_media":"{{ f }}"}</code>
              {% else %}
                <code>{"video_media":"{{ f }}","cues":[5,12]}</code>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="muted">No media uploaded yet.</div>
  {% endif %}

  <a class="linkBtn" href="{{ url_for('chairman.dashboard') }}">Back</a>
</div>
{% endblock %}
